(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e4fb50e6"],{"029d":function(t,e,r){"use strict";r("d85a")},4750:function(t,e,r){t.exports=r.p+"static/img/back-icon.8472bb64.svg"},c805:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pools-detail ml-auto mr-auto",staticStyle:{"max-width":"600px",width:"100%"}},[n("div",{staticClass:"text-white-100 text-3xl mb-10 flex items-center"},[t._l(t.formData,(function(e,r){return n("span",{key:r,staticClass:"inline-block -ml-1"},[n("img",{staticClass:"inline-block w-6",attrs:{src:t.poolsUrl(e.coins),alt:"",srcset:""}})])})),n("span",{staticClass:"inline-block px-2"},[t._v(" "+t._s(t.title)+" ")]),n("span",{staticClass:"inline-block text-xs ml-4 text-white-45 cursor-pointer",on:{click:t.handleBack}},[n("img",{staticClass:"inline-block w-4 mr-1",attrs:{src:r("4750"),alt:"",srcset:""}}),t._v("BACK ")])],2),n("div",{staticClass:"grid"},[n("div",{staticClass:"rounded-2xl p-6 bg-card"},[n("div",{staticClass:"grid grid-cols-2 my-4"},t._l(t.tab,(function(e,r){return n("div",{key:r,staticClass:"text-sm text-white-85 tab rounded-full text-center h-10 leading-10 cursor-pointer",class:t.routeName===e.key?"active":"",on:{click:function(r){return t.handleTab(e)}}},[t._v(" "+t._s(0===r?"+":"-")+" "+t._s(e.name)+" Liquidity ")])})),0),n("div",{staticClass:"py-6"},t._l(t.formData,(function(e,r){return n("div",{key:r,staticClass:"relative h-12 border mb-4 p-2 border-white-15 justify-between flex items-center border-solid rounded-full hover:border-white-30"},[n("div",{staticClass:"h-8 w-full"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.num,expression:"item.num"}],staticClass:"block appearance-none h-full border-0 focus:outline-none bg-white-none focus:border-0 px-3 w-full text-base placeholder-white-30 text-white-85",attrs:{type:"number",placeholder:"0.00"},domProps:{value:e.num},on:{input:function(r){r.target.composing||t.$set(e,"num",r.target.value)}}})]),n("div",{staticClass:"w-36 flex-shrink-0 flex items-center"},[n("div",{staticClass:"px-2 text-xs text-main-400 cursor-pointer",on:{click:function(e){return t.handleMax(r)}}},[t._v(" Max ")]),n("div",{staticClass:"text-sm px-3 text-white-100 leading-6 border-l border-solid border-white-15"},[n("img",{staticClass:"w-5 inline-block mr-2",attrs:{src:t.poolsUrl(e.coins),alt:"",srcset:""}}),t._v(t._s(e.coins)+" ")])])])})),0),n("div",{staticClass:"pt-8"},[n("Button",{attrs:{loading:t.loading,click:t.handleDepoist}},[t._v(" Deposit ")])],1)]),n("c-Notice",{model:{value:t.error,callback:function(e){t.error=e},expression:"error"}},[t._v(" "+t._s(t.errorText)+" ")])],1)])},a=[],s=r("1da1"),i=r("5530"),o=(r("96cf"),r("b0c0"),r("99af"),r("d3b7"),r("25f0"),r("159b"),r("d81d"),r("901e")),c=r.n(o),u=r("2a7d"),l=r("86d5"),d=r("2f62"),m=r("b893"),p=r("5991"),f={name:"deposit",components:{Button:u["a"]},data:function(){return{title:"",tab:[{name:"Add",key:"deposit"},{name:"Remove",key:"withdraw"}],transNums:[],transZeroNums:[],formData:[],wrapped:!1,coins:[],loading:!1,error:!1,errorText:""}},computed:Object(i["a"])(Object(i["a"])({routeName:function(){return this.$route.name},id:function(){return this.$route.params.id}},Object(d["b"])({account:"account"})),{},{currentCoin:function(){return l["poolsData"]}}),methods:{handleBack:function(){this.$router.push("/pools")},contractDe:function(){return Object(p["c"])("3pool"===this.id?"swap":this.id)},handleMax:function(t){this.formData[t].num=this.formData[t].max},poolsUrl:function(t){return r("f613")("./".concat(t,".png"))},handleWrapped:function(){this.wrapped=!this.wrapped},handleTab:function(t){var e=t.key;this.routeName!==e&&this.$router.push({path:"/pools/".concat(this.$route.params.id,"/").concat(e)})},showError:function(t){var e=this;this.error=!0,this.errorText=t,setTimeout((function(){e.error=!1,e.errorText=""}),1e3)},handleDepoist:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,n,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.loading=!0,t.transNums=[],r=t.formData.length,n=0;case 4:if(!(n<r)){e.next=18;break}if(a=new c.a(t.formData[n].num).multipliedBy(Object(m["b"])(t.formData[n].coins).accuracy),t.transNums.push(a.toString()),!(1*t.formData[n].num>0)){e.next=15;break}return e.next=10,t.depositApprove(t.formData[n].coins,a);case 10:if(s=e.sent,s){e.next=15;break}return console.log("授权失败"),t.loading=!1,e.abrupt("return");case 15:n++,e.next=4;break;case 18:t.addLiquidity();case 19:case"end":return e.stop()}}),e)})))()},depositApprove:function(t,e){var r=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a,s,i,o,c,u,l,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=Object(p["b"])(t),n.next=3,Object(p["g"])(a.methods.approve(r.contractDe()._address,e),r.account.currentAccount);case 3:return s=n.sent,i=s.confirmation,o=s.getHash,n.next=8,o();case 8:if(c=n.sent,u=c.status,0!==u){n.next=12;break}return n.abrupt("return",!1);case 12:return n.next=14,i();case 14:if(l=n.sent,d=l.status,1!==d){n.next=20;break}return n.abrupt("return",!0);case 20:return n.abrupt("return",!1);case 21:case"end":return n.stop()}}),n)})))()},addLiquidity:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r,n,a,s,i,o,c,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.contractDe(),e.next=3,Object(p["g"])(r.methods.add_liquidity(t.transNums,0),t.account.currentAccount);case 3:return n=e.sent,a=n.confirmation,s=n.getHash,e.next=8,s();case 8:if(i=e.sent,o=i.status,c=i.data,0!==o){e.next=14;break}return t.showError("Swap Cancel"),e.abrupt("return");case 14:return e.next=16,a();case 16:u=e.sent,l=u.status,t.loading=!1,0===l?t.showError(c+" Success"):t.showError(c+" Fail");case 20:case"end":return e.stop()}}),e)})))()},getBalanceOf:function(t,e){var r=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=Object(p["b"])(t),n.next=3,a.methods.balanceOf(r.account.currentAccount).call();case 3:s=n.sent,i=s/Object(m["b"])(t).accuracy,r.formData[e].num=i,r.formData[e].max=i;case 7:case"end":return n.stop()}}),n)})))()},initFormNum:function(){var t=this;this.formData.forEach((function(e,r){t.getBalanceOf(e.coins,r)}))},init:function(){var t=this,e=l["b"][this.id];e.pools.map((function(e){t.formData.push({coins:e,num:null,max:null,address:Object(m["b"])(e).address,currencys:0})})),this.initFormNum()}},mounted:function(){this.init()}},h=f,b=(r("029d"),r("2877")),x=Object(b["a"])(h,n,a,!1,null,"75aee325",null);e["default"]=x.exports},d85a:function(t,e,r){}}]);