(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42156992"],{"2a7d":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{class:(t.disabled?"disabled ":"")+(t.loading?"loading ":"")+"focus:outline-none text-lg py-3 text-white-100 bg-gradient-to-r w-full rounded-full from-main-700 to-main-500",on:{click:t.click}},[t._t("default")],2)},a=[],s={name:"Button",props:{disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},click:{type:Function,default:function(){}}}},i=s,o=(n("ce2b"),n("2877")),c=Object(o["a"])(i,r,a,!1,null,"dcc9a3a6",null);e["a"]=c.exports},"34b3":function(t,e,n){},"3d8a":function(t,e,n){},4750:function(t,e,n){t.exports=n.p+"static/img/back-icon.8472bb64.svg"},"6fd7":function(t,e,n){"use strict";n("3d8a")},c805:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"pools-detail ml-auto mr-auto",staticStyle:{"max-width":"600px",width:"100%"}},[r("div",{staticClass:"text-white-100 text-3xl mb-10 flex items-center"},[t._l(t.formData,(function(e,n){return r("span",{key:n,staticClass:"inline-block -ml-1"},[r("img",{staticClass:"inline-block w-6",attrs:{src:t.poolsUrl(e.coins),alt:"",srcset:""}})])})),r("span",{staticClass:"inline-block px-2"},[t._v(" "+t._s(t.title)+" ")]),r("span",{staticClass:"inline-block text-xs ml-4 text-white-45 cursor-pointer",on:{click:t.handleBack}},[r("img",{staticClass:"inline-block w-4 mr-1",attrs:{src:n("4750"),alt:"",srcset:""}}),t._v("BACK ")])],2),r("div",{staticClass:"grid"},[r("div",{staticClass:"rounded-2xl p-6 bg-card"},[r("div",{staticClass:"grid grid-cols-2 my-4"},t._l(t.tab,(function(e,n){return r("div",{key:n,staticClass:"text-sm text-white-85 tab rounded-full text-center h-10 leading-10 cursor-pointer",class:t.routeName===e.key?"active":"",on:{click:function(n){return t.handleTab(e)}}},[t._v(" "+t._s(0===n?"+":"-")+" "+t._s(e.name)+" Liquidity ")])})),0),r("div",{staticClass:"py-6"},t._l(t.formData,(function(e,n){return r("div",{key:n,staticClass:"relative h-12 border mb-4 p-2 border-white-15 justify-between flex items-center border-solid rounded-full hover:border-white-30"},[r("div",{staticClass:"h-8 w-full"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.num,expression:"item.num"}],staticClass:"block appearance-none h-full border-0 focus:outline-none bg-white-none focus:border-0 px-3 w-full text-base placeholder-white-30 text-white-85",attrs:{type:"number",placeholder:"0.00"},domProps:{value:e.num},on:{input:function(n){n.target.composing||t.$set(e,"num",n.target.value)}}})]),r("div",{staticClass:"w-36 flex-shrink-0 flex items-center"},[r("div",{staticClass:"px-2 text-xs text-main-400 cursor-pointer",on:{click:function(e){return t.handleMax(n)}}},[t._v(" Max ")]),r("div",{staticClass:"text-sm px-3 text-white-100 leading-6 border-l border-solid border-white-15"},[r("img",{staticClass:"w-5 inline-block mr-2",attrs:{src:t.poolsUrl(e.coins),alt:"",srcset:""}}),t._v(t._s(e.coins)+" ")])])])})),0),r("div",{staticClass:"pt-8"},[r("Button",{attrs:{loading:t.loading,click:t.handleDepoist}},[t._v(" Deposit ")])],1)]),r("c-Notice",{model:{value:t.error,callback:function(e){t.error=e},expression:"error"}},[t._v(" "+t._s(t.errorText)+" ")])],1)])},a=[],s=n("1da1"),i=n("5530"),o=(n("96cf"),n("b0c0"),n("99af"),n("d3b7"),n("25f0"),n("3ca3"),n("ddb0"),n("d81d"),n("159b"),n("901e")),c=n.n(o),u=n("2a7d"),l=n("86d5"),d=n("2f62"),m=n("b893"),f=n("5991"),p={name:"deposit",components:{Button:u["a"]},data:function(){return{title:"",tab:[{name:"Add",key:"deposit"},{name:"Remove",key:"withdraw"}],transNums:[],transZeroNums:[],formData:[],wrapped:!1,coins:[],loading:!1,error:!1,errorText:""}},computed:Object(i["a"])(Object(i["a"])({routeName:function(){return this.$route.name},id:function(){return this.$route.params.id}},Object(d["b"])({account:"account"})),{},{currentCoin:function(){return l["poolsData"]}}),methods:{handleBack:function(){this.$router.push("/pools")},contractDe:function(){return Object(f["c"])("3pool"===this.id?"swap":this.id)},handleMax:function(t){this.formData[t].num=this.formData[t].max},poolsUrl:function(t){return n("f613")("./".concat(t,".png"))},handleWrapped:function(){this.wrapped=!this.wrapped},handleTab:function(t){var e=t.key;this.routeName!==e&&this.$router.push({path:"/pools/".concat(this.$route.params.id,"/").concat(e)})},showError:function(t){var e=this;this.error=!0,this.errorText=t,setTimeout((function(){e.error=!1,e.errorText=""}),1e3)},handleDepoist:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,r,a,s,i,o,u,l,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.loading=!0,t.transNums=[],n=t.formData.length,r=[],a=0;case 5:if(!(a<n)){e.next=22;break}if(s=new c.a(t.formData[a].num).multipliedBy(Object(m["b"])(t.formData[a].coins).accuracy),t.transNums.push(s.toString()),!(1*t.formData[a].num>0)){e.next=19;break}return e.next=11,t.depositApprove(t.formData[a].coins,s);case 11:if(i=e.sent,o=i.hstatus,u=i.confirmation,r.push(u),0!==o){e.next=19;break}return console.log("授权取消"),t.loading=!1,e.abrupt("return");case 19:a++,e.next=5;break;case 22:return e.next=24,Promise.all(r.map((function(t){return t()})));case 24:l=e.sent,d=1;case 26:if(!(d<l.length)){e.next=34;break}if(0!==l[d].status){e.next=31;break}return console.log("授权失败"),t.loading=!1,e.abrupt("return");case 31:d++,e.next=26;break;case 34:t.addLiquidity();case 35:case"end":return e.stop()}}),e)})))()},depositApprove:function(t,e){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,s,i,o,c,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=Object(f["b"])(t),r.next=3,Object(f["g"])(a.methods.approve(n.contractDe()._address,e),n.account.currentAccount);case 3:return s=r.sent,i=s.confirmation,o=s.getHash,r.next=8,o();case 8:return c=r.sent,u=c.status,r.abrupt("return",{hstatus:u,confirmation:i});case 11:case"end":return r.stop()}}),r)})))()},addLiquidity:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,r,a,s,i,o,c,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.contractDe(),e.next=3,Object(f["g"])(n.methods.add_liquidity(t.transNums,0),t.account.currentAccount);case 3:return r=e.sent,a=r.confirmation,s=r.getHash,e.next=8,s();case 8:if(i=e.sent,o=i.status,c=i.data,0!==o){e.next=14;break}return t.showError("Swap Cancel"),e.abrupt("return");case 14:return e.next=16,a();case 16:u=e.sent,l=u.status,t.loading=!1,0===l?t.showError(c+" Success"):t.showError(c+" Fail");case 20:case"end":return e.stop()}}),e)})))()},getBalanceOf:function(t,e){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=Object(f["b"])(t),r.next=3,a.methods.balanceOf(n.account.currentAccount).call();case 3:s=r.sent,i=s/Object(m["b"])(t).accuracy,n.formData[e].num=i,n.formData[e].max=i;case 7:case"end":return r.stop()}}),r)})))()},initFormNum:function(){var t=this;this.formData.forEach((function(e,n){t.getBalanceOf(e.coins,n)}))},init:function(){var t=this,e=l["b"][this.id];e.pools.map((function(e){t.formData.push({coins:e,num:null,max:null,address:Object(m["b"])(e).address,currencys:0})})),this.initFormNum()}},mounted:function(){this.init()}},h=p,b=(n("6fd7"),n("2877")),x=Object(b["a"])(h,r,a,!1,null,"22b0c5a7",null);e["default"]=x.exports},ce2b:function(t,e,n){"use strict";n("34b3")}}]);