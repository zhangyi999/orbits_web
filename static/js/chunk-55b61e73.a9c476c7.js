(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55b61e73"],{"3cc5":function(t,e,n){},4750:function(t,e,n){t.exports=n.p+"static/img/back-icon.8472bb64.svg"},6560:function(t,e,n){"use strict";n("3cc5")},c805:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pools-detail ml-auto mr-auto",staticStyle:{"max-width":"600px",width:"100%"}},[a("div",{staticClass:"text-white-100 text-3xl mb-10 flex items-center"},[t._l(t.formData,(function(e,n){return a("span",{key:n,staticClass:"inline-block -ml-1"},[a("img",{staticClass:"inline-block w-6",attrs:{src:t.poolsUrl(e.coins),alt:"",srcset:""}})])})),a("span",{staticClass:"inline-block px-2"},[t._v(" "+t._s(t.title)+" ")]),a("span",{staticClass:"inline-block text-xs ml-4 text-white-45 cursor-pointer",on:{click:t.handleBack}},[a("img",{staticClass:"inline-block w-4 mr-1",attrs:{src:n("4750"),alt:"",srcset:""}}),t._v("BACK ")])],2),a("div",{staticClass:"grid"},[a("div",{staticClass:"rounded-2xl p-6 bg-card"},[a("div",{staticClass:"grid grid-cols-2 my-4"},t._l(t.tab,(function(e,n){return a("div",{key:n,staticClass:"text-sm text-white-85 tab rounded-full text-center h-10 leading-10 cursor-pointer",class:t.routeName===e.key?"active":"",on:{click:function(n){return t.handleTab(e)}}},[t._v(" "+t._s(0===n?"+":"-")+" "+t._s(e.name)+" Liquidity ")])})),0),a("div",{staticClass:"py-6"},t._l(t.formData,(function(e,n){return a("div",{key:n,staticClass:"relative h-12 border mb-4 p-2 border-white-15 justify-between flex items-center border-solid rounded-full hover:border-white-30"},[a("div",{staticClass:"h-8 w-full"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.num,expression:"item.num"}],staticClass:"block appearance-none h-full border-0 focus:outline-none bg-white-none focus:border-0 px-3 w-full text-base placeholder-white-30 text-white-85",attrs:{type:"number",placeholder:"0.00"},domProps:{value:e.num},on:{input:function(n){n.target.composing||t.$set(e,"num",n.target.value)}}})]),a("div",{staticClass:"w-36 flex-shrink-0 flex items-center"},[a("div",{staticClass:"px-2 text-xs text-main-400 cursor-pointer",on:{click:function(e){return t.handleMax(n)}}},[t._v(" Max ")]),a("div",{staticClass:"text-sm px-3 text-white-100 leading-6 border-l border-solid border-white-15"},[a("img",{staticClass:"w-5 inline-block mr-2",attrs:{src:t.poolsUrl(e.coins),alt:"",srcset:""}}),t._v(t._s(e.coins)+" ")])])])})),0),a("div",{staticClass:"pt-8"},[a("Button",{attrs:{loading:t.loading,click:t.handleDepoist}},[t._v(" Deposit ")])],1)])])])},r=[],s=n("1da1"),i=n("5530"),o=(n("96cf"),n("b0c0"),n("99af"),n("d3b7"),n("25f0"),n("3ca3"),n("ddb0"),n("159b"),n("d81d"),n("901e")),c=n.n(o),u=n("2a7d"),l=n("86d5"),d=n("2f62"),m=n("b893"),p=n("5991"),f={name:"deposit",components:{Button:u["a"]},data:function(){return{title:"",tab:[{name:"Add",key:"deposit"},{name:"Remove",key:"withdraw"}],transNums:[],transZeroNums:[],formData:[],wrapped:!1,coins:[],loading:!1}},computed:Object(i["a"])(Object(i["a"])({routeName:function(){return this.$route.name},id:function(){return this.$route.params.id}},Object(d["b"])({account:"account"})),{},{currentCoin:function(){return l["poolsData"]}}),methods:{handleBack:function(){this.$router.push("/pools")},contractDe:function(){return Object(p["c"])("3pool"===this.id?"swap":this.id)},handleMax:function(t){this.formData[t].num=this.formData[t].max},poolsUrl:function(t){return n("f613")("./".concat(t,".png"))},handleWrapped:function(){this.wrapped=!this.wrapped},handleTab:function(t){var e=t.key;this.routeName!==e&&this.$router.push({path:"/pools/".concat(this.$route.params.id,"/").concat(e)})},handleDepoist:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,a,r,s,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(t.loading=!0,t.transNums=[],n=t.formData.length,a=[],r=0;r<n;r++)console.log(1*t.formData[r].num>0,t.formData[r].num),s=new c.a(t.formData[r].num).multipliedBy(Object(m["b"])(t.formData[r].coins).accuracy),t.transNums.push(s.toString()),1*t.formData[r].num>0&&a.push(t.depositApprove(t.formData[r].coins,s));return e.next=7,Promise.all(a);case 7:i=e.sent,console.log({res:i}),o=0;case 10:if(!(o<i.length)){e.next=18;break}if(i[o]){e.next=15;break}return console.log("授权失败"),t.loading=!1,e.abrupt("return");case 15:o++,e.next=10;break;case 18:t.addLiquidity();case 19:case"end":return e.stop()}}),e)})))()},depositApprove:function(t,e){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,s,i,o,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=Object(p["b"])(t),a.next=3,Object(p["g"])(r.methods.approve(n.contractDe()._address,e),n.account.currentAccount);case 3:return s=a.sent,i=s.confirmation,a.next=7,i();case 7:if(o=a.sent,c=o.status,console.log({status:c},"{status}"),1!==c){a.next=14;break}return a.abrupt("return",!0);case 14:return a.abrupt("return",!1);case 15:case"end":return a.stop()}}),a)})))()},addLiquidity:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,a,r,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.contractDe(),e.next=3,Object(p["g"])(n.methods.add_liquidity(t.transNums,0),t.account.currentAccount);case 3:return a=e.sent,r=a.confirmation,e.next=7,r();case 7:s=e.sent,i=s.status,t.loading=!1,console.log({status:i});case 11:case"end":return e.stop()}}),e)})))()},getBalanceOf:function(t,e){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=Object(p["b"])(t),a.next=3,r.methods.balanceOf(n.account.currentAccount).call();case 3:s=a.sent,i=s/Object(m["b"])(t).accuracy,n.formData[e].num=i,n.formData[e].max=i;case 7:case"end":return a.stop()}}),a)})))()},initFormNum:function(){var t=this;this.formData.forEach((function(e,n){t.getBalanceOf(e.coins,n)}))},init:function(){var t=this,e=l["b"][this.id];e.pools.map((function(e){t.formData.push({coins:e,num:null,max:null,address:Object(m["b"])(e).address,currencys:0})})),this.initFormNum()}},mounted:function(){this.init()}},h=f,b=(n("6560"),n("2877")),x=Object(b["a"])(h,a,r,!1,null,"6156a444",null);e["default"]=x.exports}}]);